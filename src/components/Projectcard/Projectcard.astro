---
import { Picture, Image } from "@astrojs/image/components"
import { Icon } from "astro-icon"

const { projectPostEntry } = Astro.props
const { index } = Astro.props
---

<div
	class="group overflow-hidden grid md:grid-cols-2 gap-3 md:gap-5 items-center shadow-lg duration-300 transition-all rounded-2xl border-2 p-4"
>
	<a href={`/project/${projectPostEntry.slug}`}>
		<div class="object-cover overflow-hidden rounded-xl">
			<Picture
				src={projectPostEntry.data.image.src}
				alt={projectPostEntry.data.image.alt}
				sizes="(max-width: 800px) 100vw, 800px"
				widths={[200, 400, 800]}
				aspectRatio="16:9"
				background="#ffffff"
				fit="fill"
				position="center"
				loading={index <= 2 ? "eager" : "lazy"}
				decoding={index <= 2 ? "sync" : "async"}
				class="object-cover md:group-hover:rotate-[-2deg] md:group-hover:scale-[1.2] duration-300 transition-all md:grayscale md:group-hover:grayscale-0"
			/>
		</div>
	</a>
	<div class="">
		<span
			class="h-7 flex justify-between text-gray-700 md:group-hover:text-blue-400 uppercase tracking-wider text-sm font-medium"
		>
			{projectPostEntry.data.category}
			<Icon
				class="h-6 mt-[-1px]"
				style={projectPostEntry.data.iconstyle}
				name={projectPostEntry.data.icon}
			/>
		</span>
		<a
			aria-label={projectPostEntry.data.title}
			href={`/project/${projectPostEntry.slug}`}
		>
			<h2 class="tracking-tighter text-xl font-medium leading-snug mt-1">
				{projectPostEntry.data.title}
			</h2>
		</a>

		<p
			class="pt-1 tracking-tighter leading-tight line-clamp-2 text-gray-700 max-w-xl"
		>
			{projectPostEntry.data.snippet}
		</p>
		<div class="flex justify-between pt-4">
			<div>
				{
					projectPostEntry.data.source && (
						<a
							class="github-button"
							href={projectPostEntry.data.source.link}
							data-icon="octicon-star"
							data-size="large"
							data-show-count="true"
							aria-label="Star ntkme/github-buttons on GitHub"
						>
							Star
						</a>
					)
				}
			</div>
			<div class="">
				<a
					aria-label="ViewMore about Project"
					href={`/project/${projectPostEntry.slug}`}
					class="link-underline1 text-gray-600 hover:text-black duration-200"
				>
					Full Case Study &rarr;
				</a>
			</div>
		</div>
	</div>
</div>
